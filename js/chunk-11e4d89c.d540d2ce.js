(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-11e4d89c"],{"0a0d":function(t,e,a){t.exports=a("e829")},"2f37":function(t,e,a){var n=a("63b6");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"59ca":function(t,e,a){"use strict";function n(t){return t&&"object"===typeof t&&"default"in t?t["default"]:t}a("95c6");var s=n(a("c23d"));
/**
 * @license
 * Copyright 2018 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */t.exports=s},"5d6b":function(t,e,a){var n=a("e53d").parseInt,s=a("a1ce").trim,i=a("e692"),r=/^[-+]?0[xX]/;t.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(t,e){var a=s(String(t),3);return n(a,e>>>0||(r.test(a)?16:10))}:n},7445:function(t,e,a){var n=a("63b6"),s=a("5d6b");n(n.G+n.F*(parseInt!=s),{parseInt:s})},"77e8":function(t,e,a){},8845:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{domProps:{innerHTML:t._s(t.temp.resultStyle)}}),t.GameStatic.start?t._e():a("div",{staticClass:"start"},[a("div",{staticClass:"card content"},[a("h5",{staticClass:"card-header"},[t._v(t._s(t.user.data.displayName)+" 你好，歡迎挑戰 Flexbox 海盜")]),t._m(0),a("div",{staticClass:"card-footer text-muted text-right"},[a("a",{staticClass:"btn btn-success",attrs:{href:"#",disabled:!t.user.data},on:{click:function(e){return e.preventDefault(),t.startGame(e)}}},[t._v("馬上開始")])])])]),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-4 col-lg-4 left-con"},[a("h2",{staticClass:"mt-5 h2"},[t._v("Flex Pirate 挑戰")]),a("hr"),a("div",{staticClass:"question mb-3 card"},[a("div",{staticClass:"card-body"},[a("a",{staticClass:"w3hex-link",attrs:{href:t.game[t.levelVal].study,target:"_blank"}},[a("i",{staticClass:"fas fa-book"}),t._v(" 教學\n          ")]),a("p",{staticClass:"mb-1"},[t._v("Level  "),a("b",[t._v(t._s(t.levelVal+1))]),t._v(" /30")]),t._v("\n          "+t._s(t.game[t.levelVal].topic)+"\n          "),a("p",{staticClass:"notice",domProps:{innerHTML:t._s(t.game[t.levelVal].notice)}}),a("Notice",{attrs:{displayData:t.game[t.levelVal].displayData}})],1)]),a("div",{staticClass:"code-arry"},[t._l(t.game[t.levelVal].prompt,function(e,n){return a("div",{key:n,staticClass:"codes"},[a("b",[t._v(t._s(e))]),t._v(" {\n            "),a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.temp.writeStyle[n],expression:"temp.writeStyle[index]"}],attrs:{id:"code"+n,rows:"6"},domProps:{value:t.temp.writeStyle[n]},on:{keydown:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;e.preventDefault()},input:function(e){e.target.composing||t.$set(t.temp.writeStyle,n,e.target.value)}}}),t._v("\n            }\n          ")])}),"發射"!==t.GameStatic.nextBtn?a("p",{staticClass:"hit"},[a("span",[t._v(t._s(t.GameStatic.nextBtn))])]):t._e()],2),t.temp.wrongCode?a("div",{staticClass:"wrong mt-3 card border-danger"},[a("div",{staticClass:"card-body"},[t._v("\n            "+t._s(t.temp.wrongCode)+"\n          ")])]):t._e(),"發射"==t.GameStatic.nextBtn?a("button",{staticClass:"btn btn-danger mt-5",on:{click:t.checkAnswer}},[t._v("\n          "+t._s(t.GameStatic.nextBtn)+"\n        ")]):t._e(),"發射"!==t.GameStatic.nextBtn?a("button",{staticClass:"btn btn-warning mt-5",on:{click:t.nextPage}},[t._v("\n          下一關\n        ")]):t._e()]),a("div",{staticClass:"col-8 col-lg-8 playground"},[a("nav",{staticClass:"playNav"},[a("p",{staticClass:"level"},[t._v("Level."+t._s(t.levelVal+1))])]),a("div",{staticClass:"flexbox",attrs:{id:"p"+t.levelVal}},[-1===t.temp.direction?a("h3",{staticClass:"main"},[t._v("主軸線")]):t._e(),-1===t.temp.direction?a("h3",{staticClass:"vice"},[t._v("交錯軸")]):t._e(),-1!==t.temp.direction?a("h3",{staticClass:"vice column"},[t._v("主軸線")]):t._e(),-1!==t.temp.direction?a("h3",{staticClass:"main column"},[t._v("交錯軸")]):t._e(),a("div",{domProps:{innerHTML:t._s(t.game[t.levelVal].html)}}),a("div",{staticClass:"flex-container"},[a("div",{staticClass:"grid-con"},[a("div",{class:{main:!0,column:-1!==t.temp.direction}}),a("div",{class:{vice:!0,column:-1!==t.temp.direction}}),t._l(36,function(t){return a("div",{key:t,staticClass:"grid"})})],2)])])])])]),a("div",{staticClass:"modal fade",attrs:{id:"nicknameModal",tabindex:"-1",role:"dialog","aria-labelledby":"nicknameModalLabel","aria-hidden":"true","data-backdrop":"false","data-keyboard":"false"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(1),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.writeName(e)}}},[a("label",{attrs:{for:"nickName"}},[t._v("請輸入排行榜上的暱稱")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.temp.nickName,expression:"temp.nickName"}],staticClass:"form-control",attrs:{type:"text",id:"nickName",required:""},domProps:{value:t.temp.nickName},on:{focus:function(e){t.temp.nickNameError=""},input:function(e){e.target.composing||t.$set(t.temp,"nickName",e.target.value)}}}),t.temp.nickNameError?a("p",{staticClass:"text-danger"},[t._v(t._s(t.temp.nickNameError))]):t._e()])]),a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"button",disabled:!t.temp.nickName},on:{click:function(e){return t.writeName()}}},[t._v("\n            送出\n          ")])])])])])])},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v("故事背景")]),a("p",{staticClass:"card-text"},[t._v("\n          有一天 FLEX 海盜集團襲擊了國王的領土，還偷走了皇冠。\n          "),a("br"),t._v("國王決定派出六角戰艦，欲將 FLEX 海盜集團殲滅並取出皇冠。\n          "),a("br"),t._v("FLEX 海盜集團的活動範圍被分為 20 層，想要拿到皇冠需要達到 FLEX 最深層才行。\n        ")]),a("h5",{staticClass:"card-title mt-4"},[t._v("遊戲辦法")]),a("p",{staticClass:"card-text"},[t._v("\n          請將"),a("b",[t._v("座標圖上的準心瞄準到對應的海盜船上")]),t._v("，瞄準完成後按下紅色按鈕發射飛彈，一層一層將 FLEX 海盜集團攻破!\n        ")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"nicknameModalLabel"}},[t._v("恭喜過關")])])}],i=(a("7514"),a("55dd"),a("6b54"),a("a4bb")),r=a.n(i),c=(a("28a5"),a("ac6a"),a("7618")),o=a("e814"),l=a.n(o),d=a("0a0d"),m=a.n(d),u=(a("a481"),a("59ca")),v=a.n(u),p=a("1157"),f=a.n(p),g=a("aa0e"),h=a("44be"),C={name:"Contest",props:["user"],data:function(){return{data:[],levelVal:0,temp:{writeStyle:[],resultStyle:"",wrongCode:"",ansRight:!0,direction:-1,storVal:"",nickName:"",nickNameError:""},GameStatic:{start:!1,nextBtn:"發射",end:!1},game:h["a"]}},watch:{"temp.writeStyle":{handler:function(t){var e=this,a=e.resultCSS(t);e.temp.resultStyle="<style>".concat(a,"</style>"),e.temp.direction=a.replace(/\s+/g,"").indexOf("flex-direction:column")},deep:!0}},components:{Notice:g["a"]},methods:{getData:function(){},startGame:function(){var t=this,e=new Date;t.GameStatic.start=!0,t.storVal=m()(),v.a.database().ref("users/".concat(t.user.id,"/record/").concat(t.storVal)).set({startTime:String(e),endTime:"未完成"})},endGame:function(t){var e=this,a=this,n=new Date,s="",i=0;f()("#nicknameModal").modal("hide"),a.GameStatic.end=!0,v.a.database().ref("users/".concat(a.user.id,"/record/").concat(a.storVal)).once("value").then(function(t){s=t.val().startTime}).then(function(){i=l()(n-new Date(s),10)/1e3,localStorage.setItem("sec",i)}).then(function(){v.a.database().ref("users/".concat(a.user.id,"/record/").concat(a.storVal)).set({startTime:s,endTime:String(n),sec:i,nickName:t,user:a.user.data.displayName,date:"".concat(new Date(s).getFullYear(),"/").concat(new Date(s).getMonth()+1,"/").concat(new Date(s).getDate())}),e.$bus.$emit("get:sec",i),a.$router.push("contest_end")})},trimSemiColon:function(t){return";"===t.slice(-1)?t.slice(0,this.length-1):t},JsonCSS:function(t){var e=this;if("string"!==typeof t)return console.error("Need a CSS string but given ",Object(c["a"])(t),t),"Not a valid CSS..!";var a,n,s,i={},r=/\r\n|\r|\n|\u2028|\u2029/g;try{t.split("{").forEach(function(t){if(n=t.trim(),n)if(-1===n.indexOf("}"))i[n]={},a=n;else{n.substring(0,n.indexOf("}")).split(";").forEach(function(t){s=t.split(":"),s&&2===s.length&&(i[a][s[0].trim().replace(r,"")]=e.trimSemiColon(s[1].trim().replace(r,"")))});try{a=n.split("}")[1].trim(),a&&(i[a]={})}catch(c){}}})}catch(o){return"Not a valid CSS..!"}return i},resultCSS:function(t){for(var e=this,a="",n=0;n<t.length;n+=1)a+="\n          ".concat(e.game[e.levelVal].prompt[n],"{\n            ").concat(t[n],"\n          }\n        ");return a},checkAnswer:function(){var t=this,e=t.game[t.levelVal].ans,a=r()(e);t.temp.wrongCode="",t.temp.ansRight=!0;for(var n=!1,s=t.JsonCSS(t.resultCSS(t.temp.writeStyle)),i=0;i<a.length;i+=1){for(var o=a[i],l=s[o],d=r()(l),m=t.game[t.levelVal].ans[o],u=function(a){var n=d[a],s=l[n];if(!e[o][n])return t.temp.wrongCode="不需要用到 ".concat(n),t.temp.ansRight=!1,{v:!1};var i=e[o][n].find(function(t){return t===s});i||(t.temp.wrongCode="".concat(n," 的值錯誤"),t.temp.ansRight=!1)},v=0;v<d.length;v+=1){var p=u(v);if("object"===Object(c["a"])(p))return p.v}n=r()(m).sort().toString()===d.sort().toString()}return 7===t.levelVal&&n&&t.temp.ansRight?t.GameStatic.nextBtn="移動成功":n&&t.temp.ansRight?(t.GameStatic.nextBtn="闖關成功",f()(".ships .item").addClass("shake-opacity").addClass("shake-constant").addClass("shake-constant--hover").fadeOut(1800)):t.temp.wrongCode&&n&&(t.temp.ansRight=!0,t.temp.wrongCode="沒有打中"),!1},nextPage:function(){var t=this;f()(".ships .item").removeClass("shake-opacity").removeClass("shake-constant").removeClass("shake-constant--hover").fadeIn(0),29===t.levelVal?f()("#nicknameModal").modal("show"):21===t.levelVal||22===t.levelVal?(t.levelVal+=1,t.temp.writeStyle=[],t.temp.wrongCode="",t.GameStatic.nextBtn="發射"):(t.levelVal+=1,t.temp.writeStyle=[],t.temp.writeStyle[0]="display: flex;",t.temp.wrongCode="",t.GameStatic.nextBtn="發射")},writeName:function(){var t=this;v.a.database().ref("records").once("value").then(function(e){var a=e.val(),n=r()(a),s=n.map(function(t){return a[t]}).filter(function(t){return t.sec>0}),i=s.find(function(e){return e.nickName===t.temp.nickName});i?t.temp.nickNameError="名稱重複":t.endGame(t.temp.nickName)})},resetError:function(){var t=this;t.temp.nickNameError=""}},created:function(){this.getData(),window.onbeforeunload=function(t){t.returnValue="離開後不會保存此次對戰紀錄"}}},b=C,_=(a("a6c0"),a("2877")),S=Object(_["a"])(b,n,s,!1,null,"78efec87",null);e["default"]=S.exports},a1ce:function(t,e,a){var n=a("63b6"),s=a("25eb"),i=a("294c"),r=a("e692"),c="["+r+"]",o="​",l=RegExp("^"+c+c+"*"),d=RegExp(c+c+"*$"),m=function(t,e,a){var s={},c=i(function(){return!!r[t]()||o[t]()!=o}),l=s[t]=c?e(u):r[t];a&&(s[a]=l),n(n.P+n.F*c,"String",s)},u=m.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(d,"")),t};t.exports=m},a6c0:function(t,e,a){"use strict";var n=a("77e8"),s=a.n(n);s.a},b9e9:function(t,e,a){a("7445"),t.exports=a("584a").parseInt},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,a){t.exports=a("b9e9")},e829:function(t,e,a){a("2f37"),t.exports=a("584a").Date.now}}]);
//# sourceMappingURL=chunk-11e4d89c.d540d2ce.js.map